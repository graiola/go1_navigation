<launch>
       <arg name="target" default="raspberrypi" />

	<!-- The sender node -->
	<node name="udp_sender" pkg="nimbro_topic_transport" type="udp_sender" output="screen">

		<!-- The destination host name or IP address -->
		<param name="destination_addr" value="$(arg target)" />
		<param name="destination_port" value="17001" />

		<!-- Load the list of topics from a YAML file -->
		<rosparam command="load" file="$(find go1_navigation)/params/nimbro/topics_pilot.yaml" />
	</node>
	
	<node name="udp_receiver" pkg="nimbro_topic_transport" type="udp_receiver" output="screen">
		<param name="port" value="17001" />
		<param name="drop_repeated_msgs" value="true" />	
	</node>
	
	<node name="udp_server" pkg="nimbro_service_transport" type="udp_server" output="screen">
		<param name="port" value="6000" />
	</node>
	
	<node name="udp_client" pkg="nimbro_service_transport" type="udp_client" output="screen">
		<param name="server"  value="$(arg target)" />
		<param name="port"    value="6000" />
		<param name="timeout" value="60" />
		<rosparam command="load" file="$(find go1_navigation)/params/nimbro/services_robot.yaml" />
	</node>

</launch>
